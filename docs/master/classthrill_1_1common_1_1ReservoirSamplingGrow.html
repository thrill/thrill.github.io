<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Thrill: ReservoirSamplingGrow&lt; Type, RNG &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Thrill
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classthrill_1_1common_1_1ReservoirSamplingGrow.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classthrill_1_1common_1_1ReservoirSamplingGrow-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ReservoirSamplingGrow&lt; Type, RNG &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Type, typename RNG = std::default_random_engine&gt;<br/>
class thrill::common::ReservoirSamplingGrow&lt; Type, RNG &gt;</h3>

<p>Implementation of a fast approximation of adaptive reservoir sampling using <a href="http://erikerlandson.github.io/blog/2015/11/20/very-fast-reservoir-sampling/">http://erikerlandson.github.io/blog/2015/11/20/very-fast-reservoir-sampling/</a> The reservoir size grows logarithmically with the number given to the sampler, new items replace old ones such that all items in the stream are sampled with the same approximately uniform probability. </p>
<p>Growing of the reservoir is implemented trivially by selecting any current item to expand the array. This works well enough if growing steps become rarer for larger streams. </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00174">174</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>
</div><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for ReservoirSamplingGrow&lt; Type, RNG &gt;:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classthrill_1_1common_1_1ReservoirSamplingGrow__inherit__graph.svg" width="220" height="160"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><code>#include &lt;<a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a87c1d269a8de6ca69d7d1ad3d3e1eb1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a87c1d269a8de6ca69d7d1ad3d3e1eb1d">ReservoirSamplingGrow</a> (std::vector&lt; Type &gt; &amp;<a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a35e83b77174bc9895cbc88cab7a7f706">samples</a>, RNG &amp;rng, double <a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#ae53184f3ec7d3522a3f36f681bc5e26c">desired_imbalance</a>=0.05)</td></tr>
<tr class="memdesc:a87c1d269a8de6ca69d7d1ad3d3e1eb1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize reservoir sampler  <a href="#a87c1d269a8de6ca69d7d1ad3d3e1eb1d">More...</a><br/></td></tr>
<tr class="separator:a87c1d269a8de6ca69d7d1ad3d3e1eb1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f1310100120dfab09b7ff82c3460f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#ad5f1310100120dfab09b7ff82c3460f8">add</a> (const Type &amp;item)</td></tr>
<tr class="memdesc:ad5f1310100120dfab09b7ff82c3460f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">visit item, maybe add it to the sample.  <a href="#ad5f1310100120dfab09b7ff82c3460f8">More...</a><br/></td></tr>
<tr class="separator:ad5f1310100120dfab09b7ff82c3460f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2000032e027274fe1658be49ec98fc51"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a2000032e027274fe1658be49ec98fc51">calc_sample_size</a> (size_t <a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a22a9772c09848d90444dda7fefa4d9ce">count</a>) const </td></tr>
<tr class="memdesc:a2000032e027274fe1658be49ec98fc51"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate desired sample size  <a href="#a2000032e027274fe1658be49ec98fc51">More...</a><br/></td></tr>
<tr class="separator:a2000032e027274fe1658be49ec98fc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f041af932c573b31b28ab022a5c410a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a8f041af932c573b31b28ab022a5c410a">calc_sample_size</a> () const </td></tr>
<tr class="memdesc:a8f041af932c573b31b28ab022a5c410a"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate desired sample size  <a href="#a8f041af932c573b31b28ab022a5c410a">More...</a><br/></td></tr>
<tr class="separator:a8f041af932c573b31b28ab022a5c410a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a9772c09848d90444dda7fefa4d9ce"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a22a9772c09848d90444dda7fefa4d9ce">count</a> () const </td></tr>
<tr class="memdesc:a22a9772c09848d90444dda7fefa4d9ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of items seen  <a href="#a22a9772c09848d90444dda7fefa4d9ce">More...</a><br/></td></tr>
<tr class="separator:a22a9772c09848d90444dda7fefa4d9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53184f3ec7d3522a3f36f681bc5e26c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#ae53184f3ec7d3522a3f36f681bc5e26c">desired_imbalance</a> () const </td></tr>
<tr class="memdesc:ae53184f3ec7d3522a3f36f681bc5e26c"><td class="mdescLeft">&#160;</td><td class="mdescRight">desired imbalance  <a href="#ae53184f3ec7d3522a3f36f681bc5e26c">More...</a><br/></td></tr>
<tr class="separator:ae53184f3ec7d3522a3f36f681bc5e26c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e83b77174bc9895cbc88cab7a7f706"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; Type &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a35e83b77174bc9895cbc88cab7a7f706">samples</a> () const </td></tr>
<tr class="memdesc:a35e83b77174bc9895cbc88cab7a7f706"><td class="mdescLeft">&#160;</td><td class="mdescRight">access to samples  <a href="#a35e83b77174bc9895cbc88cab7a7f706">More...</a><br/></td></tr>
<tr class="separator:a35e83b77174bc9895cbc88cab7a7f706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac782da1f912bceb5d8ad00c8dc892ac"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#aac782da1f912bceb5d8ad00c8dc892ac">size</a> () const </td></tr>
<tr class="memdesc:aac782da1f912bceb5d8ad00c8dc892ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of reservoir  <a href="#aac782da1f912bceb5d8ad00c8dc892ac">More...</a><br/></td></tr>
<tr class="separator:aac782da1f912bceb5d8ad00c8dc892ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad3b2570e8ec3727e8ddc95241aa96d0c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#ad3b2570e8ec3727e8ddc95241aa96d0c">calc_next_gap</a> () const </td></tr>
<tr class="memdesc:ad3b2570e8ec3727e8ddc95241aa96d0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">draw gap size from geometric distribution with p = size_ / count_  <a href="#ad3b2570e8ec3727e8ddc95241aa96d0c">More...</a><br/></td></tr>
<tr class="separator:ad3b2570e8ec3727e8ddc95241aa96d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d02ef658f5ec305b4e5c3994d28c63"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a44d02ef658f5ec305b4e5c3994d28c63">calc_steps_to_next_resize</a> () const </td></tr>
<tr class="separator:a44d02ef658f5ec305b4e5c3994d28c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6b06728795e8f208c0755874665b3a51"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a6b06728795e8f208c0755874665b3a51">count_</a> = 0</td></tr>
<tr class="memdesc:a6b06728795e8f208c0755874665b3a51"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of items seen  <a href="#a6b06728795e8f208c0755874665b3a51">More...</a><br/></td></tr>
<tr class="separator:a6b06728795e8f208c0755874665b3a51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf8d35fee6167f79c7217f4e8297110f"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#acf8d35fee6167f79c7217f4e8297110f">desired_imbalance_</a></td></tr>
<tr class="separator:acf8d35fee6167f79c7217f4e8297110f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ca9afa9d9a2d502b0b8a0da644872e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#ab8ca9afa9d9a2d502b0b8a0da644872e">gap_</a> = 0</td></tr>
<tr class="memdesc:ab8ca9afa9d9a2d502b0b8a0da644872e"><td class="mdescLeft">&#160;</td><td class="mdescRight">items to skip until next sample (used in gap algorithm)  <a href="#ab8ca9afa9d9a2d502b0b8a0da644872e">More...</a><br/></td></tr>
<tr class="separator:ab8ca9afa9d9a2d502b0b8a0da644872e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc8e9980843e054033da2c94c2931c5e"><td class="memItemLeft" align="right" valign="top">RNG &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#acc8e9980843e054033da2c94c2931c5e">rng_</a></td></tr>
<tr class="memdesc:acc8e9980843e054033da2c94c2931c5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">source of randomness  <a href="#acc8e9980843e054033da2c94c2931c5e">More...</a><br/></td></tr>
<tr class="separator:acc8e9980843e054033da2c94c2931c5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff52e2dd0033a4a098aa37da3cb3c957"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Type &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#aff52e2dd0033a4a098aa37da3cb3c957">samples_</a></td></tr>
<tr class="memdesc:aff52e2dd0033a4a098aa37da3cb3c957"><td class="mdescLeft">&#160;</td><td class="mdescRight">reservoir  <a href="#aff52e2dd0033a4a098aa37da3cb3c957">More...</a><br/></td></tr>
<tr class="separator:aff52e2dd0033a4a098aa37da3cb3c957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f31775800bbb46b35b5791def1f3acc"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a5f31775800bbb46b35b5791def1f3acc">size_</a> = 0</td></tr>
<tr class="memdesc:a5f31775800bbb46b35b5791def1f3acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of reservoir  <a href="#a5f31775800bbb46b35b5791def1f3acc">More...</a><br/></td></tr>
<tr class="separator:a5f31775800bbb46b35b5791def1f3acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8acc71da85d7ab98b1507ba75526383f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a8acc71da85d7ab98b1507ba75526383f">steps_to_resize</a> = 0</td></tr>
<tr class="memdesc:a8acc71da85d7ab98b1507ba75526383f"><td class="mdescLeft">&#160;</td><td class="mdescRight">items to process prior to checking for reservoir resize  <a href="#a8acc71da85d7ab98b1507ba75526383f">More...</a><br/></td></tr>
<tr class="separator:a8acc71da85d7ab98b1507ba75526383f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a6b72e54baf646b08b4b87f987f583dcb"><td class="memItemLeft" align="right" valign="top">static constexpr bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html#a6b72e54baf646b08b4b87f987f583dcb">debug</a> = false</td></tr>
<tr class="separator:a6b72e54baf646b08b4b87f987f583dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a87c1d269a8de6ca69d7d1ad3d3e1eb1d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html">ReservoirSamplingGrow</a> </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; Type &gt; &amp;&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RNG &amp;&#160;</td>
          <td class="paramname"><em>rng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>desired_imbalance</em> = <code>0.05</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>initialize reservoir sampler </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00180">180</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad5f1310100120dfab09b7ff82c3460f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void add </td>
          <td>(</td>
          <td class="paramtype">const Type &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>visit item, maybe add it to the sample. </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">187</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad3b2570e8ec3727e8ddc95241aa96d0c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t calc_next_gap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>draw gap size from geometric distribution with p = size_ / count_ </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00302">302</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>.</p>

</div>
</div>
<a class="anchor" id="a2000032e027274fe1658be49ec98fc51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t calc_sample_size </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>calculate desired sample size </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00270">270</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="thrill_2api_2sort_8hpp_source.html#l00337">SortNode&lt; ValueType, CompareFunction, SortAlgorithm, Stable &gt;::wanted_sample_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f041af932c573b31b28ab022a5c410a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t calc_sample_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>calculate desired sample size </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00278">278</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>, and <a class="el" href="reservoir__sampling_8hpp_source.html#l00278">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_sample_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a44d02ef658f5ec305b4e5c3994d28c63"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t calc_steps_to_next_resize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>calculate number of items/steps to process without checking for sample resize </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00318">318</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>.</p>

</div>
</div>
<a class="anchor" id="a22a9772c09848d90444dda7fefa4d9ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>number of items seen </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00261">261</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae53184f3ec7d3522a3f36f681bc5e26c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double desired_imbalance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>desired imbalance </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00267">267</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a35e83b77174bc9895cbc88cab7a7f706"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;Type&gt;&amp; samples </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>access to samples </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00264">264</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aac782da1f912bceb5d8ad00c8dc892ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>size of reservoir </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00258">258</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a6b06728795e8f208c0755874665b3a51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t count_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>number of items seen </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00286">286</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>, <a class="el" href="reservoir__sampling_8hpp_source.html#l00302">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_next_gap()</a>, <a class="el" href="reservoir__sampling_8hpp_source.html#l00278">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_sample_size()</a>, <a class="el" href="reservoir__sampling_8hpp_source.html#l00318">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_steps_to_next_resize()</a>, and <a class="el" href="reservoir__sampling_8hpp_source.html#l00261">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::count()</a>.</p>

</div>
</div>
<a class="anchor" id="a6b72e54baf646b08b4b87f987f583dcb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr bool debug = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00176">176</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>.</p>

</div>
</div>
<a class="anchor" id="acf8d35fee6167f79c7217f4e8297110f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const double desired_imbalance_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>epsilon imbalance: this reservoir sampling works well for the range 0.5 to 0.01. Imbalance 0.5 results in 79 samples for 1 million items, 0.1 in 1992, 0.05 in 6643, 0.02 in 49828, and 0.01 in 199315. </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00299">299</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00270">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_sample_size()</a>, <a class="el" href="reservoir__sampling_8hpp_source.html#l00318">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_steps_to_next_resize()</a>, and <a class="el" href="reservoir__sampling_8hpp_source.html#l00267">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::desired_imbalance()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8ca9afa9d9a2d502b0b8a0da644872e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t gap_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>items to skip until next sample (used in gap algorithm) </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00288">288</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>.</p>

</div>
</div>
<a class="anchor" id="acc8e9980843e054033da2c94c2931c5e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">RNG&amp; rng_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>source of randomness </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00294">294</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>, and <a class="el" href="reservoir__sampling_8hpp_source.html#l00302">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_next_gap()</a>.</p>

</div>
</div>
<a class="anchor" id="aff52e2dd0033a4a098aa37da3cb3c957"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Type&gt;&amp; samples_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>reservoir </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00292">292</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>, and <a class="el" href="reservoir__sampling_8hpp_source.html#l00264">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::samples()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f31775800bbb46b35b5791def1f3acc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t size_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>size of reservoir </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00284">284</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>, <a class="el" href="reservoir__sampling_8hpp_source.html#l00302">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::calc_next_gap()</a>, and <a class="el" href="reservoir__sampling_8hpp_source.html#l00258">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::size()</a>.</p>

</div>
</div>
<a class="anchor" id="a8acc71da85d7ab98b1507ba75526383f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t steps_to_resize = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>items to process prior to checking for reservoir resize </p>

<p>Definition at line <a class="el" href="reservoir__sampling_8hpp_source.html#l00290">290</a> of file <a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a>.</p>

<p>Referenced by <a class="el" href="reservoir__sampling_8hpp_source.html#l00187">ReservoirSamplingGrow&lt; SampleIndexPair &gt;::add()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>thrill/common/<a class="el" href="reservoir__sampling_8hpp_source.html">reservoir_sampling.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacethrill.html">thrill</a></li><li class="navelem"><a class="el" href="namespacethrill_1_1common.html">common</a></li><li class="navelem"><a class="el" href="classthrill_1_1common_1_1ReservoirSamplingGrow.html">ReservoirSamplingGrow</a></li>
    <li class="footer">Generated on Fri Jan 4 2019 10:47:54 for Thrill by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
